{"version":3,"sources":["../src/postgres-connection.js"],"names":["driver","PostgresConnection","dr","pool","connectionString","_pool","createPool","poolOptions","connect","options","_connect","query","rawClient","convert","column","value","types","getTypeParser","type"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAIA,SAAS,IAAb;;AAEe,MAAMC,kBAAN,sCAAoD;AACjE,aAAWD,MAAX,CAAkBE,EAAlB,EAAsB;AACpBF,aAASE,EAAT;AACD;;AAED,SAAOC,IAAP,CAAYC,gBAAZ,EAA8B;AAC5B,WAAO,KAAKC,KAAL,CAAWL,OAAOM,UAAlB,EAA8BF,gBAA9B,EAAgDH,mBAAmBM,WAAnE,CAAP;AACD;;AAED,SAAaC,OAAb,CAAqBC,OAArB,EAA8B;AAAA;;AAAA;AAC5B,aAAO,MAAKC,QAAL,CAAcT,kBAAd,EAAkCQ,OAAlC,CAAP;AAD4B;AAE7B;;AAEDE,UAAe;AACb,WAAO,6BAAmB,IAAnB,EAAyB,KAAKC,SAAL,CAAeD,KAAf,CAAqB,YAArB,CAAzB,EAAwD,KAAKE,OAA7D,CAAP;AACD;;AAEDA,gBAAyB;AAAA,QAAhBC,MAAgB,QAAhBA,MAAgB;AAAA,QAARC,KAAQ,QAARA,KAAQ;;AACvB,WAAO,aAAGC,KAAH,CAASC,aAAT,CAAuBH,OAAOI,IAA9B,EAAoCH,KAApC,CAAP;AACD;AAnBgE;kBAA9Cd,kB","file":"postgres-connection.js","sourcesContent":["import DatabaseCursor from './database-cursor';\nimport DatabaseConnection from './database-connection';\nimport pg from 'pg';\n\nlet driver = null;\n\nexport default class PostgresConnection extends DatabaseConnection {\n  static set driver(dr) {\n    driver = dr;\n  }\n\n  static pool(connectionString) {\n    return this._pool(driver.createPool, connectionString, PostgresConnection.poolOptions);\n  }\n\n  static async connect(options) {\n    return this._connect(PostgresConnection, options);\n  }\n\n  query(...args) {\n    return new DatabaseCursor(this, this.rawClient.query(...args), this.convert);\n  }\n\n  convert({column, value}) {\n    return pg.types.getTypeParser(column.type)(value);\n  }\n}\n"]}